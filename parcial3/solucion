
PIC EQU 20H
IMR EQU 21H
INT0 EQU 24H

PA EQU 30H
CA EQU 32H

N_F10 EQU 10

ORG 40
IP_F10 DW RUT_F10

ORG 3000H
;Gestor int0 (f10)
RUT_F10: PUSH AX
 IN AL, PA
 CMP AL, 0FFH
 JZ FIN
 MOV BYTE PTR [BX], AL
 INC BX
 INC CL
 JMP RETORNAR
 FIN: MOV AL, 0FFH
  OUT IMR, AL
  RETORNAR: MOV AL, PIC
   OUT PIC, AL
   POP AX
   IRET

ORG 1000H
NUMS DB 30H

ORG 1200H
DATOS DB ?

ORG 2000H
MOV BX, OFFSET DATOS ;inicio
MOV CL, 0 ;contador de caracteres leidos

;Configuracion PIO
MOV AL, 0FFH
OUT CA, AL

;Configuracion PIC
CLI
MOV AL, 11111110b
OUT IMR, AL
MOV AL, N_F10
OUT INT0, AL
STI

LOOP: IN AL, IMR
 AND AL, 1
 JZ LOOP

MOV AL, 1
MOV BX, OFFSET DATOS

CMP CL, 0
JZ CHAU

LAZO: INT 7 ;Imprimo actual
 CMP BYTE PTR [BX], 30H
 JS NONUM
 CMP BYTE PTR [BX], 40H
 JNS NONUM
 INC NUMS
 NONUM: INC BX
  DEC CL
  JNZ LAZO

CHAU: MOV BX, OFFSET NUMS
 INT 7 ;Imprimo cantidad de numeros leidos
 
INT 0
END

