
PA EQU 30H
PB EQU 31H
CA EQU 32H
CB EQU 33H
PIC EQU 20H
IMR EQU 21H
INT0 EQU 24H
N_F10 EQU 10

ORG 40
IP_F10 DW RUT_F10

ORG 1000H
LEDS DB 80H, 0C0H, 0E0H, 0F0H, 0F8H, 0FCH, 0FEH, 0FFH


ORG 3000H
RUT_F10: NOP
 PUSH AX
 MOV AL, [BX]
 OUT PB, AL
 INC BX
 INC CL
 CMP CL, 9
 JS RETORNAR
 MOV BX, OFFSET LEDS
 MOV CL, 0
 MOV AL, 0
 OUT PB, AL
 RETORNAR: POP AX
  MOV AL, PIC
  OUT PIC, AL
  IRET


ORG 2000H
; Configuracion PIC
CLI
MOV AL, 11111110b
OUT IMR, AL
MOV AL, N_F10
OUT INT0, AL
STI

; Configuracion PIO
MOV AL, 0
OUT PB, AL
OUT CB, AL

; Seteo registros
MOV CL, 0 ; Contador
MOV BX, OFFSET LEDS

; Simulo actividad productiva
LOOP: JMP LOOP
INT 0
END
