PIC EQU 20H
EOI EQU 20H
N_F10 EQU 10
ORG 40
IP_F10 DW RUT_F10

ORG 1000H
A DB "A"
Z DB "Z"
RESULT DB ?

ORG 2000H
CLI
MOV AL, 0FEH
OUT PIC+1, AL ; PIC: registro IMR
MOV AL, N_F10
OUT PIC+4, AL ; PIC: registro INT0
STI

SET: MOV DL, A
LAZO: NOP
CMP DL, 0FFH
JZ FIN
INC DL
CMP DL, Z
JS LAZO
JMP SET

FIN: INT 0

ORG 3000H
RUT_F10: NOP
;SALVO CONTEXTO
PUSH AX
PUSH BX

MOV RESULT, DL
MOV AL, 1
MOV BX, OFFSET RESULT
INT 7
MOV AL, EOI
OUT EOI, AL ; PIC: registro EOI
MOV DL, 0FFH

;RETORNO CONTEXTO
POP BX
POP AX
IRET
END
