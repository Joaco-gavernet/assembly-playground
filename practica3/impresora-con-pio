
PIO EQU 30H
PA EQU 30H
PB EQU 31H
CA EQU 32H
CB EQU 33H

ORG 1000H
MSJ DB "HOLA COMO ESTAS"
FIN DB ?

ORG 2000H
; Configuro el PIO
MOV AL, 11111101b
OUT CA, AL
MOV AL, 0
OUT CB, AL
; OUT PA, AL

MOV BX, OFFSET MSJ
MOV CL, OFFSET FIN - OFFSET MSJ

POLL: IN AL, PIO
 AND AL, 1 ; Chequeo bit de BUSY
 JNZ POLL
 
 MOV AL, [BX]
 OUT PB, AL
 
 ; Envio del pulso
 IN AL, PA
 OR AL, 2
 OUT PA, AL
 
 IN AL, PA
 AND AL, 11111101b
 OUT PA, AL
 
 INC BX
 DEC CL
 JNZ POLL

INFINITO: JMP INFINITO

INT 0
END