
ORG 1000H
A DW 0AAAAH
B DW 0BBBBH

ORG 3000H
SWAP: NOP
PUSH AX ;CONTEXT PRESERVATION
PUSH BX
PUSH CX
PUSH DX

ADD SP, 02H
POP BX ;DIRB
MOV DX, [BX] ;B
MOV CX, BX ;SAVE DIRB
POP BX ;DIRA
PUSH DX ;SAVE B
MOV DX, [BX] ;A
PUSH DX ;SAVE A
MOV AX, BX
MOV BX, CX ;DIRB
POP DX
MOV [BX], DX ;A -> B
POP DX
MOV BX, AX
MOV [BX], DX ;B -> B

POP DX ;CONTEXT PRESERVATION
POP CX
POP BX
POP AX
RET

ORG 2000H
MOV BX, OFFSET A
PUSH BX
MOV BX, OFFSET B
PUSH BX
CALL SWAP

HLT
END
